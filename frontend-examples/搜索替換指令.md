# å‰ç«¯APIçµ±ä¸€ - æœç´¢æ›¿æ›æŒ‡ä»¤

## ğŸ” å¿«é€Ÿæœç´¢æ›¿æ›æŒ‡ä»¤

åœ¨ä½ çš„å‰ç«¯å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¿«é€Ÿæ‰¾åˆ°ä¸¦æ›¿æ›æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„APIç«¯é»ã€‚

### **1. æ‰¾å‡ºæ‰€æœ‰éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆ**

```bash
# æœç´¢æ‰€æœ‰åŒ…å«èˆŠAPIç«¯é»çš„æª”æ¡ˆ
find ./src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" -o -name "*.vue" \) -exec grep -l "vipstaking\|playerprofile" {} \;

# æˆ–è€…ä½¿ç”¨ripgrepï¼ˆæ›´å¿«ï¼‰
rg -l "vipstaking|playerprofile" ./src --type js --type jsx --type ts --type tsx
```

### **2. é è¦½å°‡è¦ä¿®æ”¹çš„å…§å®¹**

```bash
# é è¦½VIPç›¸é—œçš„ä¿®æ”¹
grep -r "vipstaking" ./src --include="*.js" --include="*.jsx" --include="*.ts" --include="*.tsx" -n

# é è¦½Profileç›¸é—œçš„ä¿®æ”¹
grep -r "playerprofile" ./src --include="*.js" --include="*.jsx" --include="*.ts" --include="*.tsx" -n
```

### **3. åŸ·è¡Œæ‰¹é‡æ›¿æ›**

#### **æ–¹æ³•ä¸€ï¼šä½¿ç”¨ sed å‘½ä»¤**

```bash
# æ›¿æ›VIP APIç«¯é»
find ./src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" \) \
  -exec sed -i 's|/api/vipstaking/|/api/vip/|g' {} \;

# æ›¿æ›Profile APIç«¯é»
find ./src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" \) \
  -exec sed -i 's|/api/playerprofile/|/api/profile/|g' {} \;
```

#### **æ–¹æ³•äºŒï¼šä½¿ç”¨ VS Code å…¨åŸŸæœç´¢æ›¿æ›**

1. æ‰“é–‹ VS Code
2. æŒ‰ `Ctrl+Shift+H` (Windows/Linux) æˆ– `Cmd+Shift+H` (Mac)
3. å•Ÿç”¨æ­£å‰‡è¡¨é”å¼æ¨¡å¼ï¼ˆé»æ“Š `.*` æŒ‰éˆ•ï¼‰
4. åŸ·è¡Œä»¥ä¸‹æ›¿æ›ï¼š

**æ›¿æ› VIP APIï¼š**
- æœç´¢ï¼š`/api/vipstaking/`
- æ›¿æ›ï¼š`/api/vip/`
- ç¯„åœï¼š`./src`

**æ›¿æ› Profile APIï¼š**
- æœç´¢ï¼š`/api/playerprofile/`
- æ›¿æ›ï¼š`/api/profile/`
- ç¯„åœï¼š`./src`

### **4. æ›´ç²¾ç¢ºçš„æ›¿æ›ï¼ˆé¿å…èª¤æ›¿æ›ï¼‰**

```bash
# åªæ›¿æ›å­—ç¬¦ä¸²ä¸­çš„APIè·¯å¾‘ï¼Œé¿å…èª¤æ›¿æ›è¨»é‡‹æˆ–è®Šæ•¸å
find ./src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" \) \
  -exec sed -i 's|['\''\"]/api/vipstaking/|'\''/api/vip/|g' {} \;

find ./src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" \) \
  -exec sed -i 's|['\''\"]/api/playerprofile/|'\''/api/profile/|g' {} \;
```

### **5. é‡å°ä¸åŒæª”æ¡ˆé¡å‹çš„ç‰¹å®šæ›¿æ›**

#### **React/JavaScript å°ˆæ¡ˆ**
```bash
# æ›¿æ› fetch èª¿ç”¨
find ./src -name "*.js" -o -name "*.jsx" -exec grep -l "fetch.*vipstaking\|fetch.*playerprofile" {} \; | \
  xargs sed -i 's|fetch(`.*api/vipstaking/|fetch(`${API_BASE_URL}/api/vip/|g'

# æ›¿æ› axios èª¿ç”¨
find ./src -name "*.js" -o -name "*.jsx" -exec grep -l "axios.*vipstaking\|axios.*playerprofile" {} \; | \
  xargs sed -i 's|axios.get.*api/vipstaking/|axios.get(\`${API_BASE_URL}/api/vip/|g'
```

#### **Vue.js å°ˆæ¡ˆ**
```bash
# Vue æ–‡ä»¶ä¸­çš„æ›¿æ›
find ./src -name "*.vue" -exec sed -i 's|/api/vipstaking/|/api/vip/|g' {} \;
find ./src -name "*.vue" -exec sed -i 's|/api/playerprofile/|/api/profile/|g' {} \;
```

#### **TypeScript å°ˆæ¡ˆ**
```bash
# TypeScript æ¥å£å’Œé¡å‹å®šç¾©
find ./src -name "*.ts" -o -name "*.tsx" -exec grep -l "vipstaking\|playerprofile" {} \; | \
  xargs sed -i 's|VipStaking|Vip|g; s|PlayerProfile|Profile|g'
```

### **6. é©—è­‰ä¿®æ”¹çµæœ**

```bash
# æª¢æŸ¥æ˜¯å¦é‚„æœ‰éºæ¼çš„èˆŠAPIç«¯é»
grep -r "vipstaking\|playerprofile" ./src --include="*.js" --include="*.jsx" --include="*.ts" --include="*.tsx"

# å¦‚æœæ²’æœ‰è¼¸å‡ºï¼Œè¡¨ç¤ºæ›¿æ›æˆåŠŸ
echo "å¦‚æœä¸Šé¢æ²’æœ‰ä»»ä½•è¼¸å‡ºï¼Œèªªæ˜æ›¿æ›å®Œæˆï¼"
```

### **7. æ¸¬è©¦æ–°çš„APIç«¯é»**

åœ¨ç€è¦½å™¨é–‹ç™¼è€…æ§åˆ¶å°ä¸­æ¸¬è©¦ï¼š

```javascript
// æ¸¬è©¦VIP API
fetch('/api/vip/1')
  .then(r => r.json())
  .then(console.log)
  .catch(console.error);

// æ¸¬è©¦Profile API
fetch('/api/profile/1')
  .then(r => r.json())
  .then(console.log)
  .catch(console.error);
```

## ğŸš€ ä¸€éµåŸ·è¡Œè…³æœ¬

å‰µå»ºä¸€å€‹ `update-api-endpoints.sh` è…³æœ¬ï¼š

```bash
#!/bin/bash
echo "ğŸ”„ é–‹å§‹æ›´æ–°APIç«¯é»..."

# å‚™ä»½ç•¶å‰ç‹€æ…‹
echo "ğŸ“¦ å‰µå»ºå‚™ä»½..."
git add -A
git commit -m "Backup before API endpoint update" || true

# åŸ·è¡Œæ›¿æ›
echo "ğŸ”§ æ›¿æ›VIP APIç«¯é»..."
find ./src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" -o -name "*.vue" \) \
  -exec sed -i 's|/api/vipstaking/|/api/vip/|g' {} \;

echo "ğŸ”§ æ›¿æ›Profile APIç«¯é»..."
find ./src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" -o -name "*.vue" \) \
  -exec sed -i 's|/api/playerprofile/|/api/profile/|g' {} \;

# é©—è­‰çµæœ
echo "ğŸ” æª¢æŸ¥æ˜¯å¦é‚„æœ‰éºæ¼..."
remaining=$(grep -r "vipstaking\|playerprofile" ./src --include="*.js" --include="*.jsx" --include="*.ts" --include="*.tsx" --include="*.vue" 2>/dev/null | wc -l)

if [ "$remaining" -eq 0 ]; then
  echo "âœ… APIç«¯é»æ›´æ–°å®Œæˆï¼"
  echo "ğŸ“ å»ºè­°åŸ·è¡Œ 'npm run lint' æª¢æŸ¥èªæ³•"
  echo "ğŸ§ª å»ºè­°åŸ·è¡Œ 'npm test' é‹è¡Œæ¸¬è©¦"
else
  echo "âš ï¸  ç™¼ç¾ $remaining å€‹å¯èƒ½éœ€è¦æ‰‹å‹•æª¢æŸ¥çš„æª”æ¡ˆ"
  grep -r "vipstaking\|playerprofile" ./src --include="*.js" --include="*.jsx" --include="*.ts" --include="*.tsx" --include="*.vue"
fi
```

åŸ·è¡Œè…³æœ¬ï¼š
```bash
chmod +x update-api-endpoints.sh
./update-api-endpoints.sh
```

## ğŸ“‹ æª¢æŸ¥æ¸…å–®

ä¿®æ”¹å®Œæˆå¾Œï¼Œè«‹æª¢æŸ¥ï¼š

- [ ] æ‰€æœ‰ VIP ç›¸é—œçš„ API èª¿ç”¨å·²æ›´æ–°
- [ ] æ‰€æœ‰ Profile ç›¸é—œçš„ API èª¿ç”¨å·²æ›´æ–°
- [ ] æ²’æœ‰ ESLint/TypeScript éŒ¯èª¤
- [ ] æ¸¬è©¦é€šé
- [ ] åœ¨ç€è¦½å™¨ä¸­æ¸¬è©¦æ–°ç«¯é»æ­£å¸¸å·¥ä½œ
- [ ] æª¢æŸ¥ Network é¢æ¿æ²’æœ‰ 404 éŒ¯èª¤